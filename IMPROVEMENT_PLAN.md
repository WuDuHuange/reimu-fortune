# 博丽灵梦的每日一签 - 改进计划

> 📅 创建日期: 2025年12月30日

---

## 📋 改进清单

### 1. ✨ 樱花飘落动画
- [ ] 创建 `SakuraEffect.tsx` 组件
- [ ] 使用 Canvas 或 CSS 动画实现粒子效果
- [ ] 樱花随机生成、飘落、旋转
- [ ] 性能优化（限制粒子数量）

### 2. 🎵 抽签音效
- [ ] 添加神社铃声音效
- [ ] 添加抽签成功音效
- [ ] 创建音频控制 Hook
- [ ] 添加静音按钮

### 3. 📝 历史记录功能
- [ ] 创建 `FortuneHistory.tsx` 组件
- [ ] 使用 LocalStorage 持久化存储
- [ ] 显示历史抽签列表
- [ ] 支持查看详情和清空记录

### 4. 🎴 签文卡片美化
- [ ] 重新设计结果卡片样式
- [ ] 添加御守/绘马风格边框
- [ ] 运势等级对应不同颜色主题
- [ ] 添加卡片展开动画

### 5. 🌙 日夜主题切换
- [ ] 检测当前时间段
- [ ] 设计白天主题（明亮红白）
- [ ] 设计黄昏主题（橙红渐变）
- [ ] 设计夜晚主题（深蓝紫色）
- [ ] 平滑过渡动画

### 6. 📜 丰富签文内容
- [ ] 扩展 `FortuneResponse` 类型
- [ ] 添加幸运物品、幸运方位、幸运数字
- [ ] 添加灵梦风格吐槽语录
- [ ] 更新 API 返回结构

---

## 🏗️ 技术实现方案

### 文件结构规划
```
components/
├── YinYangOrb.tsx        # 现有 - 阴阳玉组件
├── SakuraEffect.tsx      # 新增 - 樱花飘落效果
├── FortuneCard.tsx       # 新增 - 签文卡片组件
├── FortuneHistory.tsx    # 新增 - 历史记录组件
├── AudioControl.tsx      # 新增 - 音频控制组件
└── ThemeProvider.tsx     # 新增 - 主题提供者

hooks/
├── useAudio.ts           # 新增 - 音频播放 Hook
├── useFortuneHistory.ts  # 新增 - 历史记录 Hook
└── useTimeTheme.ts       # 新增 - 时间主题 Hook

types.ts                  # 更新 - 扩展类型定义
```

### 依赖说明
- 樱花动画: 纯 CSS/Canvas，无需额外依赖
- 音效: HTML5 Audio API
- 存储: LocalStorage API
- 主题: CSS 变量 + React Context

---

## 🎯 实施顺序

| 优先级 | 功能 | 预计工作量 | 影响范围 |
|--------|------|------------|----------|
| P0 | 樱花飘落动画 | 中 | 新组件 |
| P0 | 签文卡片美化 | 中 | App.tsx |
| P1 | 丰富签文内容 | 中 | types.ts, API |
| P1 | 历史记录功能 | 中 | 新组件 |
| P2 | 抽签音效 | 小 | 新组件 |
| P2 | 日夜主题切换 | 大 | 全局样式 |

---

## ✅ 完成状态

- [x] 樱花飘落动画
- [x] 抽签音效
- [x] 历史记录功能
- [x] 签文卡片美化
- [x] 日夜主题切换
- [x] 丰富签文内容

---

*让我们开始为博丽神社增添更多灵气吧！* 🎋
